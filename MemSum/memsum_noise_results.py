# -*- coding: utf-8 -*-
"""MemSum - Noise results.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1g5xWeTWVZJsajtUljGs4nfNYHeThOSqM
"""

import json

results = [ json.loads(line) for line in open("/content/drive/MyDrive/Text Summarization/MemSum/data/golden_16k/test_results_100_100.jsonl")]

original = [ json.loads(line) for line in open("/content/drive/MyDrive/Text Summarization/MemSum/data/golden_16k/test_with_proxyarray.jsonl")]

len(original)

len(results)

original[0].get('proxy')

original[0].keys()

i = 0
perc = []
for i in range(904):
  result_i = results[i]
  original_i = original[i]

  counter = 0
  matchs = 0

  for extracted in original_i.get('proxy'):
    counter += 1
    if extracted.replace('\n', '').strip() in result_i.get('extracted'):
      matchs += 1

  perc.append(matchs/counter)

print(sum(perc)/len(perc))